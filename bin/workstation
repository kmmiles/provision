#!/usr/bin/env bash

#shellcheck source=../common.profile
source "$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)/common.profile"
require_non_root
enable_logfile

scripts=(
  'config-sudo'
  'config-apt'
  'update-packages'
  'upgrade-packages'
  'install-base'
  'install-dev'
  'install-home'
  'install-qemu'
  'install-podman'
)

for script in "${scripts[@]}"; do
  status_msg "Running $script..."
  if ! "${__ROOT}/bin/${script}" >> "$LOGFILE" 2>&1; then
    status_fail
    exit 1
  else
    status_ok
  fi
done
