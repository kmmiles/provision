#!/bin/bash

#shellcheck source=../lib.sh
source "$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)/lib.sh"
require_non_root

url="https://github.com/flutter/flutter.git"
path=$HOME/$(basename "$url" .git)
if [[ ! -d "$path" ]]; then
  sudo apt --no-install-recommends -y install \
    build-essential \
    bash \
    curl \
    git \
    zip \
    unzip \
    xz-utils \
    libglu1-mesa

  git clone --depth 1 "$url" "$path"
  "$path"/bin/flutter precache
fi
